# VectorEngine 성능 벤치마크 결과 (1536차원)

-   **측정 일시**: 2025년 7월 4일
-   **목표**: `VectorEngine`의 CRUD 기능에 대한 초기 성능 기준선(Baseline) 설정
-   **실행 명령어**: `cargo bench --bench engine_benchmark`

## 📊 벤치마크 환경

-   **CPU**: `AMD Ryzen 5 5600U with Radeon Graphics`
-   **RAM**: `8 GB`
-   **OS**: `Windows 11`
-   **Rustc 버전**: `1.86.0`
-   **주요 의존성 버전**:
    -   `hnsw_rs`: 0.3.2
    -   `rand`: 0.7.3

## 📝 결과 요약

| 벤치마크 항목 (CRUD) | 평균 실행 시간 |
| :--- | :--- |
| **`C: add_1000_docs`** | **~1.66 s** |
| **`R: search_in_1000_docs`** | **~2.25 µs** |
| **`U: update_doc_in_1000_docs`**| **~1.71 s** |
| **`D: delete_doc_in_1000_docs`**| **~1.72 s** |


## 🔬 상세 결과 및 분석

### 1. `C: add_1000_docs` (Create)

-   **내용**: 1536차원의 벡터 1,000개를 새로운 엔진에 추가하는 작업
-   **시간**: `[1.6568 s 1.6601 s 1.6633 s]`
-   **분석**: 1,000개의 문서를 인덱싱하고 `HashMap`에 저장하는 데 평균 약 **1.66초**가 소요됩니다.

### 2. `R: search_in_1000_docs` (Read)

-   **내용**: 1,000개 문서가 저장된 엔진에서 유사도 높은 상위 10개 문서를 검색하는 작업
-   **시간**: `[2.2362 µs 2.2500 µs 2.2830 µs]`
-   **분석**: 검색 작업은 평균 약 **2.25 마이크로초(µs)**로 매우 빠르게 수행됩니다. HNSW 인덱스가 효율적으로 동작하고 있음을 보여줍니다.

### 3. `U: update_doc_in_1000_docs` (Update)

-   **내용**: 1,000개 문서가 저장된 엔진에서 특정 문서 1개를 수정하는 작업
-   **시간**: `[1.6790 s 1.7083 s 1.7441 s]`
-   **분석**: 문서 1개를 업데이트하는 데 평균 약 **1.71초**가 소요됩니다. 이는 내부적으로 HNSW 인덱스 전체를 재구성(`rebuild_index`)하기 때문입니다.

### 4. `D: delete_doc_in_1000_docs` (Delete)

-   **내용**: 1,000개 문서가 저장된 엔진에서 특정 문서 1개를 삭제하는 작업
-   **시간**: `[1.7060 s 1.7194 s 1.7343 s]`
-   **분석**: 문서 1개를 삭제하는 데 평균 약 **1.72초**가 소요됩니다. `update`와 마찬가지로 인덱스 재구성으로 인해 시간이 오래 걸립니다.

## 💡 결론 및 향후 계획

-   `VectorEngine`의 CRUD 각 기능에 대한 성능 기준선이 성공적으로 수립되었습니다.
-   **주목할 점**: `Update`와 `Delete` 작업이 1,000개의 문서를 처음부터 추가하는 `Create` 작업과 거의 동일한 시간이 소요됩니다. 이는 두 작업 모두 내부적으로 HNSW 인덱스 전체를 재구성(`rebuild_index`)하는 무거운 연산을 수행하기 때문입니다.
-   **향후 과제**: 만약 문서의 수정/삭제가 매우 빈번하게 일어나는 시나리오에서 성능 문제가 발생한다면, `rebuild_index`를 최적화하거나(예: 변경된 부분만 반영) 호출 시점을 조절하는(예: 여러 번의 삭제/수정 요청을 모아서 한 번만 재구성) 전략을 고려해볼 수 있습니다.